(this["webpackJsonppaper-xerox"]=this["webpackJsonppaper-xerox"]||[]).push([[0],{19:function(e,a,t){},23:function(e,a,t){e.exports=t(35)},28:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(21),o=t.n(s),l=(t(28),t(5)),c=t(1),i=t(3),u=(t(19),t(9)),m=t(2),p=function(e){return console.log("getLoginUserSuccess"),{type:"LOGIN_USER_SUCCESS",data:e}},d=t(10),f=t.n(d),b=t(14),g="".concat("https://api-server-node.herokuapp.com","/login"),E="".concat("https://api-server-node.herokuapp.com","/register"),h="".concat("https://api-server-node.herokuapp.com","/forgotpassword"),w="".concat("https://api-server-node.herokuapp.com","/resetpassword"),v=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json";return console.log("postCall",e,a,t),new Promise((function(n,r){fetch("".concat(e),{method:"POST",headers:{"Content-Type":t},body:JSON.stringify(a)}).then((function(e){console.log("response",e),e.status>=400?r({res:e}):e.json().then((function(e){n(e)}))})).catch((function(e){console.log("ERROR",e),r(e)}))}))};function O(){return(O=Object(b.a)(f.a.mark((function e(a,t,n,r){var s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registerUser",a),e.next=4,v(E,a);case 4:s=e.sent,r(!1),"SUCCESS"===(o=(s||{}).loginResponseStatus)?t(s.userData):"INVALID_REQUEST"===o&&n({loginId:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function N(){return(N=Object(b.a)(f.a.mark((function e(a,t,n,r){var s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("loginUser",a),e.next=4,v(g,a);case 4:s=e.sent,r(!1),o=(s||{}).loginResponseStatus,console.log(s),"SUCCESS"===o?t(s.userData):"UN_AUTHORIZED"===o?n({password:!0}):"INVALID_USER"===o&&n({username:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function S(){return(S=Object(b.a)(f.a.mark((function e(a,t,n,r){var s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registerUser",a),e.next=4,v(h,a);case 4:s=e.sent,r(!1),"SUCCESS"===(o=(s||{}).loginResponseStatus)?t(s.userData):"INVALID_USER"===o&&n({username:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(){return(j=Object(b.a)(f.a.mark((function e(a,t,n,r){var s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registerUser",a),e.next=4,v(w,a);case 4:s=e.sent,r(!1),"SUCCESS"===(o=(s||{}).loginResponseStatus)?t(s.userData):"INVALID_URL"===o&&n({wrongUrl:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var y=function(e){var a=e.label,t=e.type,n=e.inputContainerClass,s=e.className,o=e.name,l=e.value,c=e.onChange,i=e.hasError,u=e.errMsg,m=e.ref,p=e.onFocus,d=e.hideStrengthBar,f=e.strengthPass;return r.a.createElement("div",{className:"".concat(n," ").concat(i?" has-error":"")},r.a.createElement("label",{htmlFor:o,className:"form-label"},a),r.a.createElement("input",{ref:m||null,type:t,className:s,name:o,value:l,onChange:c,onFocus:p||null}),i&&r.a.createElement("div",{className:"help-block"},u),!d&&"password"===t&&l&&r.a.createElement("div",{className:"strengthBarContainer mt-4"},r.a.createElement("div",{className:"strengthBar ".concat(f," br-20")})))},C=t(12),x=t.n(C),R=function(e){return r.a.createElement("div",{className:x()("Pageloader",e.className)},r.a.createElement("div",{className:"Pageloader__content"},r.a.createElement("div",{className:"Pageloader__spinner"}),r.a.createElement("h5",{className:"Pageloader__heading primary-text-color"},e.title),r.a.createElement("p",{className:"Pageloader__text"},e.message)))};R.defaultProps={message:"loading...",title:"",className:""};var P=R,I=Object(n.createContext)({}),_=I.Provider,k=I,U=function(e){var a=e.type,t=e.primaryButton,n=e.secondaryButton,s=e.bottom,o=e.className,l=x()(o);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PwaModal "+(s?"w-100p p-absolute b-0 PwaModal__bottom ":"")+l},r.a.createElement("div",{className:"PwaModal__content "+("renderProp"===a?"pt-0 pb-0 pl-0 pr-0":"")},"renderProp"!==a?r.a.createElement("h1",{className:"PwaModal__heading"},e.title):"","renderProp"===a?e.children:r.a.createElement("p",{className:"PwaModal__copy"},e.message)),r.a.createElement("div",{className:"PwaModal__actions"},t&&r.a.createElement("a",{className:"PwaModal__action PwaModal__action--primary",onClick:function(){e.onPrimaryAction()}},t),n&&r.a.createElement("a",{className:"PwaModal__action",onClick:function(){e.onSecondaryAction()}},n))))};U.defaultProps={type:"info",onPrimaryAction:function(){},onSecondaryAction:function(){},title:"",message:"",primaryButton:"",secondaryButton:"",bottom:!1};var D=U,A=function(e){var a=e.className,t=e.children;return r.a.createElement("div",{className:x()("p-fixed l-0 r-0 b-0 t-0 flex flex-center flex-middle z-10",a),style:{backgroundColor:"rgba(0, 0, 0,0.2)"}},t)},M=function(e){var a=Object(n.useContext)(k),t=Object(c.a)(a,2)[1],s=Object(n.useState)({username:"",password:""}),o=Object(c.a)(s,2),i=o[0],d=o[1],f=Object(n.useState)(!1),b=Object(c.a)(f,2),g=b[0],E=b[1],h=Object(n.useState)(!1),w=Object(c.a)(h,2),v=w[0],O=w[1],j=Object(n.useState)({username:!1,password:!1}),C=Object(c.a)(j,2),x=C[0],R=C[1],I=Object(n.useState)(null),_=Object(c.a)(I,2),U=_[0],M=_[1],L=Object(n.useState)(null),F=Object(c.a)(L,2),B=F[0],T=F[1],J=Object(n.useRef)(null),q=Object(n.useRef)(null);Object(n.useEffect)((function(){var a=null;"undefined"!==typeof Storage&&(a=JSON.parse(sessionStorage.getItem("userData"))),(a||{}).email&&e.history.push("/")}),[e.history]),Object(n.useEffect)((function(){U&&(t(p(U)),e.history.push("/"))}),[U]);var G=function(e){var a=e.target,t=a.name,n=a.value;d(Object(m.a)(Object(m.a)({},i),{},Object(u.a)({},t,n))),R(Object(m.a)(Object(m.a)({},x),{},Object(u.a)({},t,!1)))};return r.a.createElement(r.a.Fragment,null,g&&r.a.createElement(P,{className:"o-70"}),!g&&B&&r.a.createElement(A,null,r.a.createElement(D,{title:"Mail sent",onPrimaryAction:function(){T(null),O(!1)},primaryButton:"ok",message:"An email sent to ".concat(B.email," with reset password link")})),r.a.createElement("div",{className:"pr-16 pl-16 wt-90p hCenter p-relative max-wt-500"},r.a.createElement("div",{className:"flex flex-middle flex-between"},r.a.createElement("h2",null,"Login"),r.a.createElement(l.b,{to:"/register",onClick:function(){},className:"btn btn-link decoration-none"},"Register")),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),O(!0);var a=i.username,t=i.password;(R({username:!a,password:!t}),a&&t)&&(E(!0),function(e,a,t,n){N.apply(this,arguments)}({userDocument:{loginId:a,password:t}},M,R,E))}},r.a.createElement(y,{label:"Email Id",type:"email",ref:q,inputContainerClass:"mb-16",className:"form-input",name:"username",value:i.username,onChange:G,hasError:x.username,errMsg:v&&!i.username?"Email id is required":"Not a Registered user Register now"}),r.a.createElement(y,{label:"Password",type:"password",ref:J,inputContainerClass:"mb-16",className:"form-input",name:"password",value:i.password,onChange:G,hasError:x.password,errMsg:v&&!i.password?"Password is required":"Password did not matched with Email Id",hideStrengthBar:!0}),r.a.createElement("div",{className:"flex flex-right",onClick:function(){E(!0),O(!0),R({username:!i.username}),function(e,a,t,n){S.apply(this,arguments)}({userDocument:{loginId:i.username}},T,R,E)}},r.a.createElement("div",{className:"btn btn-link decoration-none c-pointer pt-0 pb-0"},"forgot Password?")),r.a.createElement("div",{className:"mb-16"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),r.a.createElement(l.b,{to:"/",className:"btn btn-link decoration-none"},"cancel")))))},L=function(e,a,t){return a&&e.includes(a)||t&&e.includes(t)?"weak":/^(?=.*[\d])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&])[\w!@#$%^&*]{8,}$/.test(e)?"strong":/^(?=.*[\d])(?=.*[a-z])(?=.*[!@#$%^&])[\w!@#$%^&*]{6,}$/.test(e)?"normal":"weak"},F=function(e){var a=Object(n.useContext)(k),t=Object(c.a)(a,2)[1],s=Object(n.useState)({firstName:"",lastName:"",loginId:"",password:""}),o=Object(c.a)(s,2),i=o[0],p=o[1],d=Object(n.useState)(!1),f=Object(c.a)(d,2),b=f[0],g=f[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),w=h[0],v=h[1],N=Object(n.useState)(null),S=Object(c.a)(N,2),j=S[0],C=S[1],x=Object(n.useState)({firstName:!1,lastName:!1,loginId:!1,password:!1}),R=Object(c.a)(x,2),I=R[0],_=R[1],U=Object(n.useState)(!1),D=Object(c.a)(U,2),A=D[0],M=D[1],F=Object(n.useRef)(null);Object(n.useEffect)((function(){var a=null;"undefined"!==typeof Storage&&(a=JSON.parse(sessionStorage.getItem("userData"))),(a||{}).email&&e.history.push("/")}),[e.history]),Object(n.useEffect)((function(){var a;j&&(t((a=j,console.log("getRegisterUserSuccess"),{type:"REGISTER_USER_SUCCESS",data:a})),e.history.push("/"))}),[j]);var B=function(e){var a=e.target,t=a.name,n=a.value;if("password"===t){var r=L(n,i.firstName,i.loginId);v(r)}_(Object(m.a)(Object(m.a)({},I),{},Object(u.a)({},t,!1))),p(Object(m.a)(Object(m.a)({},i),{},Object(u.a)({},t,n))),b&&g(!1),console.log(w)};return r.a.createElement(r.a.Fragment,null,A&&r.a.createElement(P,{className:"o-70"}),r.a.createElement("div",{className:"pr-16 pl-16 wt-90p hCenter p-relative max-wt-500"},r.a.createElement("div",{className:"flex flex-middle flex-between"},r.a.createElement("h2",null,"Register"),r.a.createElement(l.b,{to:"/login",className:"btn btn-link decoration-none"}," ","LogIn")),r.a.createElement("form",{name:"form",onSubmit:function(e){(e.preventDefault(),g(!0),_({firstName:!i.firstName,lastName:!1,loginId:!i.loginId,password:!i.password}),i.firstName&&i.loginId&&i.password)&&(M(!0),function(e,a,t,n){O.apply(this,arguments)}({userDocument:i},C,_,M))}},r.a.createElement(y,{label:"First Name",type:"text",inputContainerClass:"mb-16",className:"form-input",name:"firstName",value:i.firstName,onChange:B,hasError:I.firstName,errMsg:"First Name is required"}),r.a.createElement(y,{label:"Last Name",type:"text",inputContainerClass:"mb-16",className:"form-input",name:"lastName",value:i.lastName,onChange:B}),r.a.createElement(y,{label:"Email Id",type:"email",inputContainerClass:"mb-16",className:"form-input",name:"loginId",value:i.loginId,onChange:B,hasError:I.loginId,errMsg:b&&!i.loginId?"Email id is required":"Already have an id login now"}),r.a.createElement(y,{ref:F,label:"Password",type:"password",inputContainerClass:"mb-16",className:"form-input",name:"password",value:i.password,onChange:B,hasError:I.password,onFocus:function(){console.log("passwordFocused"),v(w||"weak")},errMsg:"Password is required",strengthPass:w}),r.a.createElement("div",{className:"mb-16"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),r.a.createElement(l.b,{to:"/",className:"btn btn-link decoration-none"},"Cancel")))))},B=function(){var e=Object(n.useContext)(k),a=Object(c.a)(e,2),t=a[0],s=a[1],o=t.user,i=o.loginStatus,u=o.data;return r.a.createElement("div",{className:"header"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-16 pr-16"},u.email),r.a.createElement("div",{className:"pr-16 c-pointer c-light-blue",onClick:function(){"undefined"!==typeof Storage&&sessionStorage.removeItem("userData"),s({type:"RESET_LOGIN_USER"})}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{className:"pl-16 pr-16 c-light-blue decoration-none",to:"/login"},"Login"),r.a.createElement(l.b,{className:"pr-16 c-light-blue decoration-none",to:"/register"},"Register")))},T=function(){var e=Object(n.useContext)(k),a=Object(c.a)(e,1)[0].user,t=a.loginStatus,s=a.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement("div",{className:"flex flex-center"},r.a.createElement("h1",null,"Hello"," ",t?s.firstName+" "+s.lastName:"anonymous")),r.a.createElement("h2",{className:"success-color t-center"},"you are a verified user"))},J=function(){var e=Object(n.useContext)(k),a=Object(c.a)(e,1)[0].user,t=a.loginStatus,s=a.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement("div",{className:"flex flex-center"},r.a.createElement("h1",null,"Hello"," ",t?s.firstName+" "+s.lastName:"anonymous")))},q=function(e){var a=Object(n.useContext)(k),t=(Object(c.a)(a,2)[1],Object(n.useState)({password:"",password2:""})),s=Object(c.a)(t,2),o=s[0],i=s[1],p=Object(n.useState)(!1),d=Object(c.a)(p,2),f=d[0],b=d[1],g=Object(n.useState)(""),E=Object(c.a)(g,2),h=E[0],w=E[1],v=Object(n.useState)(null),O=Object(c.a)(v,2),N=O[0],S=O[1],C=Object(n.useState)({password:!1,password2:!1}),x=Object(c.a)(C,2),R=x[0],I=x[1],_=Object(n.useState)(!1),U=Object(c.a)(_,2),M=U[0],F=U[1],B=Object(n.useRef)(null);Object(n.useEffect)((function(){var a=null;"undefined"!==typeof Storage&&(a=JSON.parse(sessionStorage.getItem("userData"))),(a||{}).email&&e.history.push("/")}),[e.history]);var T=function(e){var a=e.target,t=a.name,n=a.value;if("password"===t){var r=L(n);w(r)}I(Object(m.a)(Object(m.a)({},R),{},Object(u.a)({},t,!1))),i(Object(m.a)(Object(m.a)({},o),{},Object(u.a)({},t,n))),f&&b(!1),console.log(h)};return r.a.createElement(r.a.Fragment,null,M&&r.a.createElement(P,{className:"o-70"}),R.wrongUrl&&r.a.createElement(A,null,r.a.createElement(D,{title:"Wrong url",type:"Error",onPrimaryAction:function(){e.history.push("/")},primaryButton:"OK",message:"You hit the Wrong url. Go to Home Page"})),N&&r.a.createElement(A,null,r.a.createElement(D,{title:"Password changed",type:"success",onPrimaryAction:function(){e.history.push("/login")},primaryButton:"OK",message:"Password changed Successfully Login now"})),r.a.createElement("div",{className:"pr-16 pl-16 wt-90p hCenter p-relative max-wt-500"},r.a.createElement("div",{className:"flex flex-middle flex-between"},r.a.createElement("h2",null,"Reset Password"),r.a.createElement(l.b,{to:"/login",className:"btn btn-link decoration-none"}," ","LogIn")),r.a.createElement("form",{name:"form",onSubmit:function(a){var t,n;(a.preventDefault(),b(!0),I({password:!o.password,password2:o.password!==o.password2}),o.password&&o.password===o.password2)&&(F(!0),function(e,a,t,n){j.apply(this,arguments)}({userDocument:{password:o.password,token:(t=["match","params","token"],n=e,t.reduce((function(e,a){return e&&e[a]?e[a]:null}),n))}},S,I,F))}},r.a.createElement(y,{ref:B,label:"New Password",type:"password",inputContainerClass:"mb-16",className:"form-input",name:"password",value:o.password,onChange:T,hasError:R.password,onFocus:function(){console.log("passwordFocused"),w(h||"weak")},errMsg:"Password is required",strengthPass:h}),r.a.createElement(y,{ref:B,label:"Confirm New Password",type:"password",inputContainerClass:"mb-16",className:"form-input",name:"password2",value:o.password2,onChange:T,hasError:R.password2,hideStrengthBar:!0,errMsg:o.password2?"Please enter the same password as first one.":"This field is required."}),r.a.createElement("div",{className:"mb-16"},r.a.createElement("button",{className:"btn btn-primary"},"Reset")))))},G=function(){var e=Object(n.useContext)(k),a=Object(c.a)(e,2)[1],t=Object(n.useState)(!1),s=Object(c.a)(t,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){var e=null;"undefined"!==typeof Storage&&(e=JSON.parse(sessionStorage.getItem("userData"))),(e||{}).email&&a(p(e)),l("2665"===window.prompt("whats your key","default"))}),[]),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:function(e){return o?r.a.createElement(T,e):r.a.createElement(J,null)}}),r.a.createElement(i.a,{exact:!0,path:"/login",component:M}),r.a.createElement(i.a,{exact:!0,path:"/register",component:F}),r.a.createElement(i.a,{exact:!0,path:"/resetPass/:token",component:q}))},$=function(e,a){var t;return"LOGIN_USER_SUCCESS"===a.type||"REGISTER_USER_SUCCESS"===a.type?(t=Object(m.a)(Object(m.a)({},e),{},{loginStatus:!0,data:a.data,submission:"success"}),"undefined"!==typeof Storage&&sessionStorage.setItem("userData",JSON.stringify(a.data))):"RESET_LOGIN_USER"===a.type&&(t=Object(m.a)(Object(m.a)({},e),{},{loginStatus:!1})),t||e},H=function(e,a){return{user:$(e.user,a)}},V={user:{}},W=function(e){return r.a.createElement(_,{value:Object(n.useReducer)(H,V)},e.children)};var z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,{basename:"/"},r.a.createElement(W,null,r.a.createElement(G,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.fcb36fa5.chunk.js.map