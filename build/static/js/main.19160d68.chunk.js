(this["webpackJsonppaper-xerox"]=this["webpackJsonppaper-xerox"]||[]).push([[0],{19:function(e,a,t){},23:function(e,a,t){e.exports=t(35)},28:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(21),o=t.n(s),l=(t(28),t(7)),c=t(2),i=t(1),m=(t(19),t(9)),u=t(4),p=function(e){return console.log("getLoginUserSuccess"),{type:"LOGIN_USER_SUCCESS",data:e}},d=t(11),g=t.n(d),f=t(14),b="".concat("https://api-server-node.herokuapp.com","/login"),E="".concat("https://api-server-node.herokuapp.com","/register"),h="".concat("https://api-server-node.herokuapp.com","/forgotpassword"),v=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json";return console.log("postCall",e,a,t),new Promise((function(n,r){fetch("".concat(e),{method:"POST",headers:{"Content-Type":t},body:JSON.stringify(a)}).then((function(e){console.log("response",e),e.status>=400?r({res:e}):e.json().then((function(e){n(e)}))})).catch((function(e){console.log("ERROR",e),r(e)}))}))};function N(){return(N=Object(f.a)(g.a.mark((function e(a,t,n,r){var s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registerUser",a),e.next=4,v(E,a);case 4:s=e.sent,r(!1),"SUCCESS"===(o=(s||{}).loginResponseStatus)?t(s.userData):"INVALID_REQUEST"===o&&n({loginId:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function S(){return(S=Object(f.a)(g.a.mark((function e(a,t,n,r){var s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("loginUser",a),e.next=4,v(b,a);case 4:s=e.sent,r(!1),o=(s||{}).loginResponseStatus,console.log(s),"SUCCESS"===o?t(s.userData):"UN_AUTHORIZED"===o?n({password:!0}):"INVALID_USER"===o&&n({username:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function O(){return(O=Object(f.a)(g.a.mark((function e(a,t,n,r){var s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registerUser",a),e.next=4,v(h,a);case 4:s=e.sent,r(!1),"SUCCESS"===(o=(s||{}).loginResponseStatus)?t(s.userData):"INVALID_USER"===o&&n({username:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1),console.log("API ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var w=function(e){var a=e.label,t=e.type,n=e.inputContainerClass,s=e.className,o=e.name,l=e.value,c=e.onChange,i=e.hasError,m=e.errMsg,u=e.ref,p=e.onFocus,d=e.hideStrengthBar,g=e.strengthPass;return r.a.createElement("div",{className:"".concat(n," ").concat(i?" has-error":"")},r.a.createElement("label",{htmlFor:o,className:"form-label"},a),r.a.createElement("input",{ref:u||null,type:t,className:s,name:o,value:l,onChange:c,onFocus:p||null}),i&&r.a.createElement("div",{className:"help-block"},m),!d&&"password"===o&&l&&r.a.createElement("div",{className:"strengthBarContainer mt-4"},r.a.createElement("div",{className:"strengthBar ".concat(g," br-20")})))},j=t(12),y=t.n(j),C=function(e){return r.a.createElement("div",{className:y()("Pageloader",e.className)},r.a.createElement("div",{className:"Pageloader__content"},r.a.createElement("div",{className:"Pageloader__spinner"}),r.a.createElement("h5",{className:"Pageloader__heading primary-text-color"},e.title),r.a.createElement("p",{className:"Pageloader__text"},e.message)))};C.defaultProps={message:"loading...",title:"",className:""};var x=C,R=Object(n.createContext)({}),_=R.Provider,I=R,P=function(e){var a=e.type,t=e.primaryButton,n=e.secondaryButton,s=e.bottom,o=e.className,l=y()(o);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PwaModal "+(s?"w-100p p-absolute b-0 PwaModal__bottom ":"")+l},r.a.createElement("div",{className:"PwaModal__content "+("renderProp"===a?"pt-0 pb-0 pl-0 pr-0":"")},"renderProp"!==a?r.a.createElement("h1",{className:"PwaModal__heading"},e.title):"","renderProp"===a?e.children:r.a.createElement("p",{className:"PwaModal__copy"},e.message)),r.a.createElement("div",{className:"PwaModal__actions"},t&&r.a.createElement("a",{className:"PwaModal__action PwaModal__action--primary",onClick:function(){e.onPrimaryAction()}},t),n&&r.a.createElement("a",{className:"PwaModal__action",onClick:function(){e.onSecondaryAction()}},n))))};P.defaultProps={type:"info",onPrimaryAction:function(){},onSecondaryAction:function(){},title:"",message:"",primaryButton:"",secondaryButton:"",bottom:!1};var k=P,U=function(e){var a=e.className,t=e.children;return r.a.createElement("div",{className:y()("p-fixed l-0 r-0 b-0 t-0 flex flex-center flex-middle z-10",a),style:{backgroundColor:"rgba(0, 0, 0,0.2)"}},t)},D=function(e){var a=Object(n.useContext)(I),t=Object(c.a)(a,2)[1],s=Object(n.useState)({username:"",password:""}),o=Object(c.a)(s,2),i=o[0],d=o[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),b=f[0],E=f[1],h=Object(n.useState)(!1),v=Object(c.a)(h,2),N=v[0],j=v[1],y=Object(n.useState)({username:!1,password:!1}),C=Object(c.a)(y,2),R=C[0],_=C[1],P=Object(n.useState)(null),D=Object(c.a)(P,2),M=D[0],A=D[1],L=Object(n.useState)(null),F=Object(c.a)(L,2),B=F[0],T=F[1],J=Object(n.useRef)(null),$=Object(n.useRef)(null);Object(n.useEffect)((function(){var a=null;"undefined"!==typeof Storage&&(a=JSON.parse(sessionStorage.getItem("userData"))),(a||{}).email&&e.history.push("/")}),[e.history]),Object(n.useEffect)((function(){M&&(t(p(M)),e.history.push("/"))}),[M]);var G=function(e){var a=e.target,t=a.name,n=a.value;d(Object(u.a)(Object(u.a)({},i),{},Object(m.a)({},t,n))),_(Object(u.a)(Object(u.a)({},R),{},Object(m.a)({},t,!1)))};return r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(x,{className:"o-70"}),!b&&B&&r.a.createElement(U,null,r.a.createElement(k,{title:"Mail sent",onPrimaryAction:function(){T(null)},primaryButton:"ok",message:"An email sent to ".concat(B.email," with reset password link")})),r.a.createElement("div",{className:"pr-16 pl-16 wt-90p hCenter p-relative max-wt-500"},r.a.createElement("div",{className:"flex flex-middle flex-between"},r.a.createElement("h2",null,"Login"),r.a.createElement(l.b,{to:"/register",onClick:function(){},className:"btn btn-link decoration-none"},"Register")),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),j(!0);var a=i.username,t=i.password;(_({username:!a,password:!t}),a&&t)&&(E(!0),function(e,a,t,n){S.apply(this,arguments)}({userDocument:{loginId:a,password:t}},A,_,E))}},r.a.createElement(w,{label:"Email Id",type:"email",ref:$,inputContainerClass:"mb-16",className:"form-input",name:"username",value:i.username,onChange:G,hasError:R.username,errMsg:N&&!i.username?"Email id is required":"Not a Registered user Register now"}),r.a.createElement(w,{label:"Password",type:"password",ref:J,inputContainerClass:"mb-16",className:"form-input",name:"password",value:i.password,onChange:G,hasError:R.password,errMsg:N&&!i.password?"Password is required":"Password did not matched with Email Id",hideStrengthBar:!0}),r.a.createElement("div",{className:"flex flex-right",onClick:function(){E(!0),function(e,a,t,n){O.apply(this,arguments)}({userDocument:{loginId:i.username}},T,_,E)}},r.a.createElement("div",{className:"btn btn-link decoration-none c-pointer pt-0 pb-0"},"forgot Password?")),r.a.createElement("div",{className:"mb-16"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),r.a.createElement(l.b,{to:"/",className:"btn btn-link decoration-none"},"cancel")))))},M=function(e){var a=Object(n.useContext)(I),t=Object(c.a)(a,2)[1],s=Object(n.useState)({firstName:"",lastName:"",loginId:"",password:""}),o=Object(c.a)(s,2),i=o[0],p=o[1],d=Object(n.useState)(!1),g=Object(c.a)(d,2),f=g[0],b=g[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),v=h[0],S=h[1],O=Object(n.useState)(null),j=Object(c.a)(O,2),y=j[0],C=j[1],R=Object(n.useState)({firstName:!1,lastName:!1,loginId:!1,password:!1}),_=Object(c.a)(R,2),P=_[0],k=_[1],U=Object(n.useState)(!1),D=Object(c.a)(U,2),M=D[0],A=D[1],L=Object(n.useRef)(null);Object(n.useEffect)((function(){var a=null;"undefined"!==typeof Storage&&(a=JSON.parse(sessionStorage.getItem("userData"))),(a||{}).email&&e.history.push("/")}),[e.history]),Object(n.useEffect)((function(){var a;y&&(t((a=y,console.log("getRegisterUserSuccess"),{type:"REGISTER_USER_SUCCESS",data:a})),e.history.push("/"))}),[y]);var F=function(e){var a,t,n,r=e.target,s=r.name,o=r.value;if("password"===s){var l=(a=o,t=i.firstName,n=i.loginId,t&&a.includes(t)||n&&a.includes(n)?"weak":/^(?=.*[\d])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&])[\w!@#$%^&*]{8,}$/.test(a)?"strong":/^(?=.*[\d])(?=.*[a-z])(?=.*[!@#$%^&])[\w!@#$%^&*]{6,}$/.test(a)?"normal":"weak");S(l)}k(Object(u.a)(Object(u.a)({},P),{},Object(m.a)({},s,!1))),p(Object(u.a)(Object(u.a)({},i),{},Object(m.a)({},s,o))),f&&b(!1),console.log(v)};return r.a.createElement(r.a.Fragment,null,M&&r.a.createElement(x,{className:"o-70"}),r.a.createElement("div",{className:"pr-16 pl-16 wt-90p hCenter p-relative max-wt-500"},r.a.createElement("div",{className:"flex flex-middle flex-between"},r.a.createElement("h2",null,"Register"),r.a.createElement(l.b,{to:"/login",className:"btn btn-link decoration-none"}," ","LogIn")),r.a.createElement("form",{name:"form",onSubmit:function(e){(e.preventDefault(),b(!0),k({firstName:!i.firstName,lastName:!1,loginId:!i.loginId,password:!i.password}),i.firstName&&i.loginId&&i.password)&&(A(!0),function(e,a,t,n){N.apply(this,arguments)}({userDocument:i},C,k,A))}},r.a.createElement(w,{label:"First Name",type:"text",inputContainerClass:"mb-16",className:"form-input",name:"firstName",value:i.firstName,onChange:F,hasError:P.firstName,errMsg:"First Name is required"}),r.a.createElement(w,{label:"Last Name",type:"text",inputContainerClass:"mb-16",className:"form-input",name:"lastName",value:i.lastName,onChange:F}),r.a.createElement(w,{label:"Email Id",type:"email",inputContainerClass:"mb-16",className:"form-input",name:"loginId",value:i.loginId,onChange:F,hasError:P.loginId,errMsg:f&&!i.loginId?"Email id is required":"Already have an id login now"}),r.a.createElement(w,{ref:L,label:"Password",type:"password",inputContainerClass:"mb-16",className:"form-input",name:"password",value:i.password,onChange:F,hasError:P.password,onFocus:function(){console.log("passwordFocused"),S(v||"weak")},errMsg:"Password is required",strengthPass:v}),r.a.createElement("div",{className:"mb-16"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),r.a.createElement(l.b,{to:"/",className:"btn btn-link decoration-none"},"Cancel")))))},A=function(){var e=Object(n.useContext)(I),a=Object(c.a)(e,2),t=a[0],s=a[1],o=t.user,i=o.loginStatus,m=o.data;return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-16 pr-16"},m.email),r.a.createElement("div",{className:"pr-16 c-pointer c-light-blue",onClick:function(){"undefined"!==typeof Storage&&sessionStorage.removeItem("userData"),s({type:"RESET_LOGIN_USER"})}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{className:"pl-16 pr-16 c-light-blue decoration-none",to:"/login"},"Login"),r.a.createElement(l.b,{className:"pr-16 c-light-blue decoration-none",to:"/register"},"Register"))),r.a.createElement("div",{className:"flex flex-center"},r.a.createElement("h1",null,"Hello"," ",i?m.firstName+" "+m.lastName:"anonymous")))},L=function(){var e=Object(n.useContext)(I),a=Object(c.a)(e,2)[1];return Object(n.useEffect)((function(){var e=null;"undefined"!==typeof Storage&&(e=JSON.parse(sessionStorage.getItem("userData"))),(e||{}).email&&a(p(e))}),[]),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:A}),r.a.createElement(i.a,{exact:!0,path:"/login",component:D}),r.a.createElement(i.a,{exact:!0,path:"/register",component:M}))},F=function(e,a){var t;return"LOGIN_USER_SUCCESS"===a.type||"REGISTER_USER_SUCCESS"===a.type?(t=Object(u.a)(Object(u.a)({},e),{},{loginStatus:!0,data:a.data,submission:"success"}),"undefined"!==typeof Storage&&sessionStorage.setItem("userData",JSON.stringify(a.data))):"RESET_LOGIN_USER"===a.type&&(t=Object(u.a)(Object(u.a)({},e),{},{loginStatus:!1})),t||e},B=function(e,a){return{user:F(e.user,a)}},T={user:{}},J=function(e){return r.a.createElement(_,{value:Object(n.useReducer)(B,T)},e.children)};var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,{basename:"/"},r.a.createElement(J,null,r.a.createElement(L,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.19160d68.chunk.js.map